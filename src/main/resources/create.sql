create table if not exists roles (id serial primary key, name varchar(255) not null, created_on date not null, updated_on date);
create table if not exists users (id serial primary key, first_name varchar(255) not null, last_name varchar(255) not null, job_title varchar(255), email varchar(255) unique not null, role_id integer references roles(id), password varchar(255) not null, direct_supervisor_id integer references users(id), department_head_id integer references users(id), created_on date not null, updated_on date);
create table if not exists event_types (id serial primary key, name varchar(255), percentage integer check (percentage > 0 and percentage <= 100), created_on date not null, updated_on date);
create table if not exists grading_formats (id serial primary key, format varchar(255) not null, description text, created_on date not null, updated_on date);
create type event_status as enum ('Applied', 'Supervisor Approved', 'Department Head Approved', 'Approved', 'In Progress', 'Pass', 'Fail', 'BenCo Approved');
create table if not exists events (id serial primary key, event_type_id integer references event_types(id), datetime timestamp not null, location varchar(255) not null, description text, justification text not null, cost decimal (6,2) not null, grading_format integer references grading_formats(id), passing_grade_cutoff varchar(255) not null, completed_on date, status event_status, attachment bytea, created_on date not null, updated_on date);
create table if not exists reimbursements (id serial primary key, employee_id integer references users(id), event_id integer references events(id), direct_supervisor_approved_on timestamp, direct_supervisor_auto_approved boolean, department_head_approved_on timestamp, department_head_auto_approved boolean, benco_approved_on timestamp, denied_on timestamp, denied_reason text, created_on date not null, updated_on date);
insert into grading_formats (format, description, created_on) values ('GPA', 'A scale from 0 to 4', now()), ('Letter', 'Can be A, B, C, D, F', now()), ('100', 'A score from 0 to 100', now()), ('Pass/Fail', 'A student either passes or fails', now()), ('Presentation', 'A presentation will determine satisfactory knowledge', now());
insert into roles (name, created_on) values ('Benefits Coordinator', now()), ('Employee', now()), ('Supervisor', now()), ('Department Head', now()), ('Officer', now());
insert into event_types (name, percentage, created_on) values ('University Course', 80, now()), ('Seminar', 60, now()), ('Certification Preparation', 75, now()), ('Certification', 100, now()), ('Technical Training', 90, now()), ('Other', 30, now());